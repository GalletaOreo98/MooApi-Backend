"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[123],{429:(Z,h,l)=>{l.r(h),l.d(h,{GlobalchatModule:()=>k});var s=l(9808),u=l(9560),t=l(7587),r=l(1724),m=l(520);let g=(()=>{class o{constructor(e){this.httpClient=e}getChat(){return this.httpClient.get("https://moo-api-facebook.herokuapp.com/api/chatglobal")}postChat(e){return this.httpClient.post("https://moo-api-facebook.herokuapp.com/api/chatglobal",{comentario:e})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=l(9148),b=l(8223),c=l(2382);function f(o,a){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function v(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ngb-toast",9),t.NdJ("hidden",function(){return t.CHM(e),t.oxw().close()}),t._uU(1," Hola, esto es el chat global, en teoria solo puedes acceder aqu\xed si estas registrado \u{1f609} "),t._UZ(2,"br"),t._uU(3," Recuerda que esto es un chat global, as\xed que mide lo que dices y no compartas informaci\xf3n importante "),t.qZA()}2&o&&t.Q6J("autohide",!1)}function C(o,a){if(1&o&&(t.TgZ(0,"li",10)(1,"div",11)(2,"div",12),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&o){const e=a.$implicit;t.xp6(3),t.Oqu(e.user),t.xp6(1),t.hij(" ",e.comentario," ")}}let _=(()=>{class o{constructor(e){this.activeModal=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.Kz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ngbd-modal-content"]],inputs:{users:"users"},decls:10,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Usuarios activos"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"ul"),t.YNc(6,f,2,1,"li",4),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.activeModal.close("Close click")}),t._uU(9,"Close"),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngForOf",n.users))},directives:[s.sg],encapsulation:2}),o})();const S=[{path:"",component:(()=>{class o{constructor(e,n,i,d,T){this.globalChatService=e,this.router=n,this.authServicesService=i,this.websocketService=d,this.modalService=T,this.show=!1,this.comentario=""}ngOnInit(){this.websocketService.newUser(),this.websocketService.onSayHello().subscribe({next:()=>{console.log("onSayHello activated"),this.globalChatService.getChat().subscribe({next:e=>{this.chat=e.message},error:e=>{localStorage.removeItem("informado_del_global_chat"),this.authServicesService.logOut(),this.router.navigate(["auth/login"])}})}}),this.globalChatService.getChat().subscribe({next:e=>{this.chat=e.message,localStorage.getItem("informado_del_global_chat")||(this.show=!0),setTimeout(()=>this.show=!1,15e3)},error:e=>{this.authServicesService.logOut(),localStorage.removeItem("informado_del_global_chat"),this.router.navigate(["auth/login"])}})}open(){const e=this.modalService.open(_);this.websocketService.verUsuariosConectados(n=>{e.componentInstance.users=n,console.log(e.componentInstance.users)})}postChat(){console.log(this.comentario),this.globalChatService.postChat(this.comentario).subscribe({next:e=>{this.sayHello(),this.comentario=""},error:e=>{console.log(e)}})}sayHello(){this.websocketService.sayHello()}close(){this.show=!1,localStorage.setItem("informado_del_global_chat","yes")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g),t.Y36(u.F0),t.Y36(p.C),t.Y36(b.i),t.Y36(r.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-globalchat"]],decls:11,vars:3,consts:[[1,"position-fixed","top-0","end-0","p-3",2,"z-index","11"],["header","Lain",3,"autohide","hidden",4,"ngIf"],[1,"list-group","mx-auto","col-11","col-md-9","mb-5"],[1,"d-flex","rounded",2,"background-color","gray","cursor","pointer",3,"click"],[1,"text-white","my-auto","mx-auto","py-2","text-decoration-underline"],["class","list-group-item d-flex justify-content-between align-items-start list-group-item-dark",4,"ngFor","ngForOf"],[1,"d-flex","col-11","col-md-9","fixed-bottom","mx-auto"],["rows","1",1,"form-control",2,"border","2px solid black","border-radius","0",3,"ngModel","ngModelChange","keydown.enter"],["type","button",1,"btn","btn-dark",2,"border-radius","0",3,"click"],["header","Lain",3,"autohide","hidden"],[1,"list-group-item","d-flex","justify-content-between","align-items-start","list-group-item-dark"],[1,"ms-2","me-auto"],[1,"fw-bold"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,v,4,1,"ngb-toast",1),t.qZA(),t.TgZ(2,"ul",2)(3,"div",3),t.NdJ("click",function(){return n.open()}),t.TgZ(4,"p",4),t._uU(5,"Ver usuarios activos"),t.qZA()(),t.YNc(6,C,5,2,"li",5),t.qZA(),t.TgZ(7,"div",6)(8,"textarea",7),t.NdJ("ngModelChange",function(d){return n.comentario=d})("keydown.enter",function(){return n.postChat()}),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return n.postChat()}),t._uU(10,"Enviar"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.show),t.xp6(5),t.Q6J("ngForOf",n.chat),t.xp6(2),t.Q6J("ngModel",n.comentario))},directives:[s.O5,r.Iv,s.sg,c.Fj,c.JJ,c.On],styles:[""]}),o})()},{path:"**",redirectTo:"globalchat"}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,y,r.IJ,c.u5]]}),o})()}}]);